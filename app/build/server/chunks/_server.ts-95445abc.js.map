{"version":3,"file":"_server.ts-95445abc.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/v1/search.json/_server.ts.js"],"sourcesContent":["import{e as l,j as E}from\"../../../../../chunks/index2.js\";import{M as g}from\"../../../../../chunks/musicResponsiveListItemRenderer.js\";import{i as h}from\"../../../../../chunks/utils.js\";import\"../../../../../chunks/index.js\";import{b as Q}from\"../../../../../chunks/request.js\";const y={all:\"\",songs:\"EgWKAQIIAWoKEAMQBBAJEAoQBQ%3D%3D\",videos:\"EgWKAQIQAWoKEAMQBBAJEAoQBQ%3D%3D\",albums:\"EgWKAQIYAWoKEAMQBBAJEAoQBQ%3D%3D\",artists:\"EgWKAQIgAWoKEAMQBBAJEAoQBQ%3D%3D\",community_playlists:\"EgeKAQQoAEABagwQDhAKEAkQAxAEEAU%3D\",featured_playlists:\"EgeKAQQoADgBagwQDhAKEAMQBBAJEAU%3D\",all_playlists:\"EgWKAQIoAWoKEAMQBBAKEAUQCQ%3D%3D\"},K=async({url:i})=>{const n=i.searchParams,a=n.get(\"q\")??\"\",o=n.get(\"filter\")??void 0,s=n.get(\"ctoken\")??\"\",e=n.get(\"itct\")??\"\",r=y[o]??void 0;try{const t=await Q(\"search\",{context:{client:{clientName:\"WEB_REMIX\",clientVersion:\"1.20220404.01.00\"}},params:{browseId:\"\",query:decodeURIComponent(a),params:o!==\"all\"?`${r}`:void 0},headers:null,continuation:s!==\"\"?{continuation:s,ctoken:s,itct:`${e}`,type:\"next\"}:void 0});if(!t)throw l(500,\"Failed to send the search request\");if(!t.ok)throw l(t.status,t.statusText);const c=await t.json();console.log(\"RESPONSE\",c);const m=Array.isArray(c?.contents?.tabbedSearchResultsRenderer?.tabs)&&c?.contents?.tabbedSearchResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.contents,p=c?.continuationContents?.musicShelfContinuation,A=s!==\"\"?b(p,o):f(m,o);return console.log(\"RESULTS\",A),E(A)}catch(t){throw console.error(t),l(500,t)}};function b(i,n){const a=x;Array.isArray(i?.continuations)&&i?.continuations[0]?.nextContinuationData;const o=n.includes(\"playlists\")?\"playlists\":n,s=d(i.contents,o);return{continuation:a,results:s,type:\"next\"}}function f(i=[],n){const a=[],o={};let s=i.length;for(;--s>-1;){const e={contents:[],header:{title:\"\"}},r=i[s];if(r&&r.itemSectionRenderer)continue;const t=r.musicShelfRenderer;if(t){const c=Array.isArray(t.contents)&&t.contents;if(Array.isArray(t?.continuations)&&t?.continuations[0].nextContinuationData&&Object.assign(o,t.continuations[0].nextContinuationData),t.title&&(e.header.title=t.title?.runs[0]?.text),c){const u=d(c,e.header?.title?.toLowerCase().replace(/\\s/gm,\"_\"));e.contents=u}a.unshift(e)}}return{results:a,continuation:o}}function d(i,n){const a=[];let o=i.length;for(;--o>-1;){const s=i[o],e=g(s),r=n===\"top_result\"&&e.endpoint?.pageType?.match(/SINGLE|ALBUM/i)?\"albums\":n;if(Object.assign(e,{type:r}),r.includes(\"playlists\")||r===\"albums\"){let t=\"\";h(e.subtitle,c=>t+=c.text),Object.assign(e,{metaData:t,browseId:s.musicResponsiveListItemRenderer?.navigationEndpoint?.browseEndpoint?.browseId,playlistId:s.musicResponsiveListItemRenderer.menu?.menuRenderer?.items[0]?.menuNavigationItemRenderer?.navigationEndpoint?.watchPlaylistEndpoint?.playlistId})}n===\"songs\"&&Object.assign(e,{album:e.subtitle.at(-3).pageType?.includes(\"ALBUM\")&&e.subtitle.at(-3)}),a.unshift(e)}return a}export{K as GET};\n"],"names":["o","Q","l","c","E","g","h"],"mappings":"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"}