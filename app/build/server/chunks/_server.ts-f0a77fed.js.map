{"version":3,"file":"_server.ts-f0a77fed.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/v1/playlist.json/_server.ts.js"],"sourcesContent":["import{M as y}from\"../../../../../chunks/musicResponsiveListItemRenderer.js\";import{M as b}from\"../../../../../chunks/musicTwoRowItemRenderer.js\";import{m as T}from\"../../../../../chunks/utils.js\";import\"../../../../../chunks/index.js\";import{e as p,j as R}from\"../../../../../chunks/index2.js\";import{b as S}from\"../../../../../chunks/request.js\";const k=async({url:i})=>{try{const o=i.searchParams,e=o.get(\"list\")||\"\",s=o.get(\"itct\")||\"\",t=o.get(\"ctoken\")||\"\",r=o.get(\"ref\")||\"\",u=o.get(\"visitorData\")||\"\",a={browseId:e};return t!==\"\"?A(a,{ctoken:decodeURIComponent(t),continuation:decodeURIComponent(t),itct:s,type:\"next\"},r.slice(2),u):w(e,r)}catch(o){return new Response(void 0,{status:500,headers:{statusText:`${o}`}})}};async function A(i,o,e,s){const t=await S(\"playlist\",{context:{client:{clientName:\"WEB_REMIX\",clientVersion:\"1.20220404.01.00\",hl:\"en\",visitorData:s,originalUrl:\"https://music.youtube.com/playlist?list=\"+e}},headers:{referer:\"https://music.youtube.com/playlist?list=\"+e},params:{},continuation:o});if(t===null)throw p(500,{message:\"Error fetching playlist\"});if(!t.ok)throw p(t.status,t.statusText);const r=await t.json(),{continuationContents:{musicPlaylistShelfContinuation:{contents:u=[],continuations:a=[]}={}}={}}=await r;let c=[],l;const d=a.length!==0?a[0]?.nextContinuationData:null;return r?.continuationContents?.sectionListContinuation?.contents[0]?.musicCarouselShelfRenderer?l=_(r?.continuationContents?.sectionListContinuation?.contents[0]?.musicCarouselShelfRenderer):c=g(u,e),R({_original:r,continuations:d,tracks:c.length!==0&&c,carousel:l})}async function w(i,o){const e=await fetch(\"https://music.youtube.com/youtubei/v1/browse?key=AIzaSyC9XL3ZjWddXya6X74dJoCTL-WEYFDNX30&prettyPrint=false\",{method:\"POST\",body:JSON.stringify({context:{client:{clientName:\"WEB_REMIX\",clientVersion:\"0.1\",deviceMake:\"google\",platform:\"DESKTOP\",deviceModel:\"bot\",experimentIds:[],experimentsToken:\"\",osName:\"Googlebot\",osVersion:\"2.1\",locationInfo:{locationPermissionAuthorizationStatus:\"LOCATION_PERMISSION_AUTHORIZATION_STATUS_UNSUPPORTED\"},musicAppInfo:{musicActivityMasterSwitch:\"MUSIC_ACTIVITY_MASTER_SWITCH_INDETERMINATE\",musicLocationMasterSwitch:\"MUSIC_LOCATION_MASTER_SWITCH_INDETERMINATE\",pwaInstallabilityStatus:\"PWA_INSTALLABILITY_STATUS_UNKNOWN\"},utcOffsetMinutes:-new Date().getTimezoneOffset(),originalUrl:\"https://music.youtube.com/playlist?list=\"+i,visitorData:\"CgtQc1BrdVJNNVdNRSiImZ6KBg%3D%3D\"},user:{lockedSafetyMode:!1}},browseId:`${i}`,browseEndpointContextMusicConfig:{pageType:\"MUSIC_PAGE_TYPE_PLAYLIST\"}}),headers:{\"Content-Type\":\"application/json; charset=utf-8\",\"X-Goog-AuthUser\":\"0\",Origin:\"https://music.youtube.com\",\"x-origin\":\"https://music.youtube.com\",\"X-Goog-Visitor-Id\":\"CgtQc1BrdVJNNVdNRSiImZ6KBg%3D%3D\",\"User-Agent\":\"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\",referer:\"https://music.youtube.com/playlist?list=\"+o||i}});if(!e.ok)throw p(e.status,{message:e.statusText});const s=await e.json();let t={};if(Object.prototype.hasOwnProperty.call(s,\"header\")){const{musicDetailHeaderRenderer:m={}}=s?.header;t=m}const r=s?.responseContext?.visitorData,u=s?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.contents[0]?.musicPlaylistShelfRenderer.contents,a=s?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.contents[0]?.musicPlaylistShelfRenderer.playlistId,c=s?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.contents[0]?.musicPlaylistShelfRenderer?.continuations,l=s?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.continuations||null,d=s?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.continuations?Array.isArray(c)&&c[0]?.nextContinuationData?c[0]?.nextContinuationData:l[0]?.nextContinuationData:null;(()=>{const m=n=>Array.isArray(t[n].runs)&&(()=>{const h=[];for(const{text:C}of t[n].runs)h.push(C);return h})(),f=new Set([\"subtitle\",\"secondSubtitle\",\"description\",\"thumbnail\",\"title\"]);for(const n in t)f.has(n)||delete t[n],(n===\"subtitle\"||n===\"secondSubtitle\")&&(t[n]=t[n].runs.length!==0?m(n):[]),n===\"description\"&&Array.isArray(t[n]?.runs)&&t[n]?.runs.length!==0&&(t[n]=t[n].runs[0]?.text||void 0),n===\"thumbnail\"&&(t[n+\"s\"]=t[n]?.croppedSquareThumbnailRenderer?.thumbnail?.thumbnails||null,delete t[n]),n===\"title\"&&(t[n]=t[n].runs[0].text||\"Error\");t.playlistId=a,f.clear()})();const I=g(u,a??i.slice(2));return R({_original:s,continuations:d,tracks:I,visitorData:r,carouselContinuations:l&&l[0].nextContinuationData,header:t})}function g(i=[],o){let e=i.length;const s=Array(e);for(;--e>-1;)s[e]=y(i[e],!0,o)||void 0;return s}function E(i){return T(i,({musicCarouselShelfBasicHeaderRenderer:o})=>({title:o.title.runs[0].text}))}function N(i=[]){const o=[];for(let e=0;e<i.length;e++){const s=i[e];\"musicTwoRowItemRenderer\"in s&&(o[e]=b(s)),\"musicResponsiveListItemRenderer\"in s&&(o[e]=y(s))}return o}function _(i){return{header:E([i.header])[0],results:N(i.contents)}}export{k as GET};\n"],"names":["o","S","p","c","R","y","T","b"],"mappings":"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"}