import{S as Le,i as $e,T as De,k as g,a as j,q as R,w as Te,l as v,m as I,c as Y,h as _,r as B,x as Se,n as f,$ as de,G as se,b as P,I as m,y as Ee,L as te,W as Ne,M as le,f as X,g as Ve,t as ee,d as Ge,u as H,z as Pe,D as Me,V as ie,P as Re,an as Be,A as Ce,a1 as qe,e as _e}from"./index-02d4e276.js";import{L as Ue}from"./Loading-e098347c.js";import{e as Fe,i as We,k as D,l as x,n as me,r as ze,o as W,J as ye,L as He}from"./window-3d9785aa.js";import{g as z}from"./navigation-8392efd7.js";import{I as Je}from"./buffer-8e6379eb.js";import{b as Oe,s as ge,P as Qe}from"./PopperButton-1074cc5a.js";import"./Icon-33dd6fee.js";import{S as je}from"./url-fcaf9571.js";function ve(l,s,i){const t=l.slice();return t[19]=s[i],t}function be(l,s,i){const t=l.slice();return t[16]=s[i],t}function we(l){let s,i;return s=new Ue({props:{size:"3em"}}),{c(){Te(s.$$.fragment)},l(t){Se(s.$$.fragment,t)},m(t,a){Ee(s,t,a),i=!0},i(t){i||(X(s.$$.fragment,t),i=!0)},o(t){ee(s.$$.fragment,t),i=!1},d(t){Pe(s,t)}}}function Ye(l){var a;let s,i=(a=l[0])==null?void 0:a.subtitle,t=[];for(let r=0;r<i.length;r+=1)t[r]=Ie(ve(l,i,r));return{c(){s=g("p");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){s=v(r,"P",{class:!0});var e=I(s);for(let c=0;c<t.length;c+=1)t[c].l(e);e.forEach(_),this.h()},h(){f(s,"class","text-artist secondary svelte-16qu9ay")},m(r,e){P(r,s,e);for(let c=0;c<t.length;c+=1)t[c].m(s,null)},p(r,e){var c;if(e&1){i=(c=r[0])==null?void 0:c.subtitle;let o;for(o=0;o<i.length;o+=1){const h=ve(r,i,o);t[o]?t[o].p(h,e):(t[o]=Ie(h),t[o].c(),t[o].m(s,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=i.length}},d(r){r&&_(s),qe(t,r)}}}function Xe(l){let s,i=l[0].type==="playlist"&&"metaData"in l[0]?`${l[0].metaData}`:"",t;return{c(){s=g("p"),t=R(i),this.h()},l(a){s=v(a,"P",{class:!0});var r=I(s);t=B(r,i),r.forEach(_),this.h()},h(){f(s,"class","text-artist svelte-16qu9ay")},m(a,r){P(a,s,r),m(s,t)},p(a,r){r&1&&i!==(i=a[0].type==="playlist"&&"metaData"in a[0]?`${a[0].metaData}`:"")&&H(t,i)},d(a){a&&_(s)}}}function Ke(l){let s,i=l[0].subtitle,t=[];for(let a=0;a<i.length;a+=1)t[a]=ke(be(l,i,a));return{c(){s=g("p");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){s=v(a,"P",{class:!0});var r=I(s);for(let e=0;e<t.length;e+=1)t[e].l(r);r.forEach(_),this.h()},h(){f(s,"class","artist-stats svelte-16qu9ay")},m(a,r){P(a,s,r);for(let e=0;e<t.length;e+=1)t[e].m(s,null)},p(a,r){if(r&1){i=a[0].subtitle;let e;for(e=0;e<i.length;e+=1){const c=be(a,i,e);t[e]?t[e].p(c,r):(t[e]=ke(c),t[e].c(),t[e].m(s,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=i.length}},d(a){a&&_(s),qe(t,a)}}}function Ze(l){let s,i=l[19].text+"",t,a,r,e;function c(){return l[7](l[19])}return{c(){s=g("a"),t=R(i),this.h()},l(o){s=v(o,"A",{href:!0,class:!0});var h=I(s);t=B(h,i),h.forEach(_),this.h()},h(){var o;f(s,"href",a=`/artist/${(o=l[19])==null?void 0:o.browseId}`),f(s,"class","svelte-16qu9ay")},m(o,h){P(o,s,h),m(s,t),r||(e=te(s,"click",le(c)),r=!0)},p(o,h){var k;l=o,h&1&&i!==(i=l[19].text+"")&&H(t,i),h&1&&a!==(a=`/artist/${(k=l[19])==null?void 0:k.browseId}`)&&f(s,"href",a)},d(o){o&&_(s),r=!1,e()}}}function xe(l){let s,i=l[19].text+"",t,a,r,e;function c(){return l[6](l[19])}return{c(){s=g("a"),t=R(i),this.h()},l(o){s=v(o,"A",{href:!0,class:!0});var h=I(s);t=B(h,i),h.forEach(_),this.h()},h(){var o;f(s,"href",a=`/release?id=${(o=l[19])==null?void 0:o.browseId}`),f(s,"class","svelte-16qu9ay")},m(o,h){P(o,s,h),m(s,t),r||(e=te(s,"click",le(c)),r=!0)},p(o,h){var k;l=o,h&1&&i!==(i=l[19].text+"")&&H(t,i),h&1&&a!==(a=`/release?id=${(k=l[19])==null?void 0:k.browseId}`)&&f(s,"href",a)},d(o){o&&_(s),r=!1,e()}}}function et(l){let s=l[19].text+"",i;return{c(){i=R(s)},l(t){i=B(t,s)},m(t,a){P(t,i,a)},p(t,a){a&1&&s!==(s=t[19].text+"")&&H(i,s)},d(t){t&&_(i)}}}function Ie(l){let s,i;function t(e,c){return c&1&&(s=null),e[19].pageType?(s==null&&(s=!!e[19].pageType.includes("ALBUM")),s?xe:Ze):et}let a=t(l,-1),r=a(l);return{c(){r.c(),i=_e()},l(e){r.l(e),i=_e()},m(e,c){r.m(e,c),P(e,i,c)},p(e,c){a===(a=t(e,c))&&r?r.p(e,c):(r.d(1),r=a(e),r&&(r.c(),r.m(i.parentNode,i)))},d(e){r.d(e),e&&_(i)}}}function ke(l){let s=l[16].text+"",i;return{c(){i=R(s)},l(t){i=B(t,s)},m(t,a){P(t,i,a)},p(t,a){a&1&&s!==(s=t[16].text+"")&&H(i,s)},d(t){t&&_(i)}}}function tt(l){var ne,oe,ce,ue;let s,i,t,a,r,e,c,o,h,k,q,A,p,N=l[0].title+"",T,J,E,L,C,U,F,n,d,b,O,ae,y=l[2]&&we();function re(u,w){return u[0].type==="artists"?Ke:u[0].type==="playlist"?Xe:Ye}let K=re(l),S=K(l);return d=new Oe({props:{metadata:{artist:l[0].type!=="playlist"&&Array.isArray((ne=l[0])==null?void 0:ne.subtitle)&&[l[0].subtitle.find(Ae)??((oe=l[0].artistInfo)==null?void 0:oe.artist[0])],thumbnail:l[0].thumbnails,title:l[0].title,length:l[0].type!=="artist"&&l[0].type!=="playlist"?(ue=(ce=l[0])==null?void 0:ce.length)==null?void 0:ue.text:""},type:"search",items:l[3]}}),{c(){s=g("div"),i=g("div"),t=g("div"),a=g("div"),y&&y.c(),r=j(),e=g("div"),c=g("img"),q=j(),A=g("div"),p=g("p"),T=R(N),J=j(),E=g("span"),L=g("span"),C=R("Explicit"),U=j(),S.c(),F=j(),n=g("div"),Te(d.$$.fragment),this.h()},l(u){s=v(u,"DIV",{class:!0});var w=I(s);i=v(w,"DIV",{class:!0});var $=I(i);t=v($,"DIV",{class:!0});var V=I(t);a=v(V,"DIV",{class:!0});var G=I(a);y&&y.l(G),r=Y(G),e=v(G,"DIV",{class:!0});var Q=I(e);c=v(Q,"IMG",{alt:!0,loading:!0,width:!0,height:!0,src:!0,class:!0}),Q.forEach(_),G.forEach(_),q=Y(V),A=v(V,"DIV",{class:!0});var M=I(A);p=v(M,"P",{class:!0});var Z=I(p);T=B(Z,N),J=Y(Z),E=v(Z,"SPAN",{class:!0});var fe=I(E);L=v(fe,"SPAN",{class:!0});var he=I(L);C=B(he,"Explicit"),he.forEach(_),fe.forEach(_),Z.forEach(_),U=Y(M),S.l(M),M.forEach(_),V.forEach(_),F=Y($),n=v($,"DIV",{class:!0});var pe=I(n);Se(d.$$.fragment,pe),pe.forEach(_),$.forEach(_),w.forEach(_),this.h()},h(){f(c,"alt","thumbnail"),f(c,"loading","lazy"),f(c,"width",o=l[1].width),f(c,"height",h=l[1].height),de(c.src,k=l[1].url)||f(c,"src",k),f(c,"class","svelte-16qu9ay"),f(e,"class","thumbnail svelte-16qu9ay"),f(a,"class","img-container svelte-16qu9ay"),se(a,"artist-img",l[4]),f(L,"class","sr-only"),f(E,"class","explicit svelte-16qu9ay"),se(E,"hidden",!l[0].explicit),f(p,"class","text-title svelte-16qu9ay"),f(A,"class","title svelte-16qu9ay"),f(t,"class","itemWrapper svelte-16qu9ay"),f(n,"class","menu svelte-16qu9ay"),f(i,"class","innercard svelte-16qu9ay"),f(s,"class","container svelte-16qu9ay")},m(u,w){P(u,s,w),m(s,i),m(i,t),m(t,a),y&&y.m(a,null),m(a,r),m(a,e),m(e,c),m(t,q),m(t,A),m(A,p),m(p,T),m(p,J),m(p,E),m(E,L),m(L,C),m(A,U),S.m(A,null),m(i,F),m(i,n),Ee(d,n,null),b=!0,O||(ae=[te(t,"click",Ne(l[5])),te(s,"contextmenu",le(l[8]))],O=!0)},p(u,[w]){var V,G,Q,M;u[2]?y?w&4&&X(y,1):(y=we(),y.c(),X(y,1),y.m(a,r)):y&&(Ve(),ee(y,1,1,()=>{y=null}),Ge()),(!b||w&2&&o!==(o=u[1].width))&&f(c,"width",o),(!b||w&2&&h!==(h=u[1].height))&&f(c,"height",h),(!b||w&2&&!de(c.src,k=u[1].url))&&f(c,"src",k),(!b||w&1)&&N!==(N=u[0].title+"")&&H(T,N),(!b||w&1)&&se(E,"hidden",!u[0].explicit),K===(K=re(u))&&S?S.p(u,w):(S.d(1),S=K(u),S&&(S.c(),S.m(A,null)));const $={};w&1&&($.metadata={artist:u[0].type!=="playlist"&&Array.isArray((V=u[0])==null?void 0:V.subtitle)&&[u[0].subtitle.find(Ae)??((G=u[0].artistInfo)==null?void 0:G.artist[0])],thumbnail:u[0].thumbnails,title:u[0].title,length:u[0].type!=="artist"&&u[0].type!=="playlist"?(M=(Q=u[0])==null?void 0:Q.length)==null?void 0:M.text:""}),w&8&&($.items=u[3]),d.$set($)},i(u){b||(X(y),X(d.$$.fragment,u),b=!0)},o(u){ee(y),ee(d.$$.fragment,u),b=!1},d(u){u&&_(s),y&&y.d(),S.d(),Pe(d),O=!1,Me(ae)}}}const st=/=w\d+-h\d+-/gm,Ae=l=>{var s;return(s=l==null?void 0:l.pageType)==null?void 0:s.includes("ARTIST")};function it(l,s,i){var C,U,F;let t,a,r;ie(l,je,n=>i(11,t=n)),ie(l,Fe,n=>i(12,a=n)),ie(l,We,n=>i(13,r=n));let{data:e}=s;const c=Re();let o=!!Be("library"),h="",k="",q=Array.isArray(e==null?void 0:e.subtitle)&&((C=e.subtitle[0])==null?void 0:C.text)==="Artist",A=!1,p=[{text:"View Artist",icon:"artist",action:async()=>{var n;window.scrollTo({behavior:"smooth",top:0,left:0}),await Ce(),z(`/artist/${((n=e==null?void 0:e.subtitle.find(d=>{var b;return(b=d==null?void 0:d.pageType)==null?void 0:b.includes("ARTIST")}))==null?void 0:n.browseId)??e.artistInfo.artist[0].browseId}`)}},{text:"Go to Album",icon:"album",action:()=>{var n;window.scrollTo({behavior:"smooth",top:0,left:0}),z(`/release?id=${(n=e==null?void 0:e.album)==null?void 0:n.browseId}`)}},{text:"Play Next",icon:"queue",action:()=>D.hasActiveSession?D.addToQueue(e,r):x.setTrackWillPlayNext(e,r)},{text:"Add to Queue",icon:"queue",action:()=>D.hasActiveSession?D.addToQueue(e,a.length):x.setTrackWillPlayNext(e,a.length)},{text:"Add to Playlist",icon:"list-plus",action:async()=>{var n;if((n=e==null?void 0:e.endpoint)!=null&&n.pageType.match(/PLAYLIST|ALBUM|SINGLE/)){const O=await(await fetch("/api/v1/get_queue.json?playlistId="+(e==null?void 0:e.playlistId))).json();me.set({state:!0,item:[...O]})}else me.set({state:!0,item:e})}},{text:o?"Remove From Favorites":"Favorite",icon:o?"x":"heart",action:async()=>{!o&&ge.sendMessage("create","favorite",e),o&&(await ge.sendMessage("delete","favorite",e),c("update"))}},D.hasActiveSession?{text:"Invite Group Session",icon:"send",action:async()=>{const n={title:`Join ${D.client.displayName}'s Group Session on AlphaTrack!`,url:`${t}/session?token=${Je.toBase64(JSON.stringify({clientId:D.client.clientId,displayName:D.client.displayName}))}`};try{if(!navigator.canShare)await navigator.clipboard.writeText(n.url),W("Link copied successfully","success");else{const d=await navigator.share(n);W("Shared successfully","success")}}catch(d){W("Error: "+d,"error")}}}:{text:"Start Group Session",icon:"users",action:async()=>{ze.set(!0)}},{text:"Share",icon:"share",action:async()=>{const n={title:e.title,url:`${t}/listen?id=${e.videoId}`};try{navigator.canShare?(await navigator.share(n),W("Shared successfully","success")):(await navigator.clipboard.writeText(n.url),W("Link copied successfully","success"))}catch(d){W("Error: "+d,"error")}}}];q&&(p=p.filter(n=>{var d;return!((d=n.text)!=null&&d.includes("Add to Playlist"))})),(U=e.type)!=null&&U.includes("playlist")&&(p.splice(1,1,{text:"View Playlist",icon:"list",action:()=>{var n;window.scrollTo({behavior:"smooth",top:0,left:0}),z(`/playlist/${(n=e==null?void 0:e.endpoint)==null?void 0:n.browseId}`)}}),p.shift(),p.pop(),p=p.filter(n=>!n.text.includes("Favorite"))),e.type==="videos"&&(p=p.filter(n=>{n.text})),((F=e==null?void 0:e.album)==null?void 0:F.browseId)===void 0&&(p=ye(p,n=>n.text!=="Go to Album")),q&&(p=ye(p,n=>n.text!=="View Artist"));const N=async n=>{var d;if(!(n.target instanceof HTMLElement&&(n.target.nodeName==="A"||n.target.nodeName==="P")||A)){if(q){z(`/artist/${e.artistInfo.artist[0].browseId}`);return}try{i(2,A=!0),h=e.videoId?e.videoId:"",k=e!=null&&e.playlistId?e==null?void 0:e.playlistId:"",(d=e.type)!=null&&d.includes("playlist")||(e==null?void 0:e.type)==="albums"?await x.initPlaylistSession({playlistId:k,index:0,clickTrackingParams:e.clickTrackingParams??void 0,params:e.params}):await x.initAutoMixSession({loggingContext:e==null?void 0:e.loggingContext,videoId:h,playlistId:k,keyId:0,clickTracking:e.params,config:{playerParams:e.playerParams,type:e.musicVideoType}}),i(2,A=!1);return}catch(b){He.err(b);return}}};let T=Array.isArray(e==null?void 0:e.thumbnails)?e==null?void 0:e.thumbnails.at(0):{width:0,height:0,url:"",placeholder:""};const J=n=>z(`/release?id=${n==null?void 0:n.browseId}`),E=n=>z(`/artist/${n==null?void 0:n.browseId}`),L=n=>{window.dispatchEvent(new window.CustomEvent("contextmenu",{detail:"listing"})),Qe.set({items:p.slice(),x:n.pageX,y:n.pageY,direction:"right"})};return l.$$set=n=>{"data"in n&&i(0,e=n.data)},l.$$.update=()=>{l.$$.dirty&2&&i(1,T.url=T.width<100?T.url.replace(st,"=w240-h240-"):T.url,T)},[e,T,A,p,q,N,J,E,L]}class ht extends Le{constructor(s){super(),$e(this,s,it,tt,De,{data:0})}}export{ht as L};
